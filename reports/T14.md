# T14 — Make API docs match backend auth behavior

## Status: ✅ DONE

## Objective

Align the API docs page with the actual backend authentication mechanism. Remove contradictory Bearer API key references.

## Preflight

- Baseline: clean working tree after T13 commit `fb5cf8a`
- Build: `npm run build` exit 0, 63 routes

## Scope Confirmation

- **Target file:** `src/app/(app)/rulebooks/[id]/api/page.tsx`
- **Root cause:** Docs showed `Authorization: Bearer YOUR_API_KEY` but backend (`api-auth.ts`) uses Supabase session cookies

## Execution Packet

### Changes Made

| Area | Before | After |
|------|--------|-------|
| Auth header | `Authorization: Bearer YOUR_API_KEY` | Removed — not used by backend |
| X-Environment header | Shown in all snippets | Removed — not read by backend |
| curl snippet | Bearer token auth | `-b "YOUR_SESSION_COOKIES"` |
| JavaScript snippet | Bearer header | `credentials: "include"` (browser auto-sends cookies) |
| Python snippet | Bearer header | `cookies={}` parameter with note about planned API keys |
| Node.js snippet | Full axios example with Bearer | Removed (consolidated with JS) |
| Node.js tab | Visible tab | Removed |
| "Manage API keys" button | Link to /integrations | Removed (no API key management exists) |
| Required Headers card | `Authorization` (Required), `Content-Type` (Required), `X-Environment` (Optional) | `Content-Type` (Required), `Cookie` (Required, auto in browser) |
| Auth section | "Required Headers" title | "Authentication" title with amber notice about planned API key support |
| Unused imports | `Link`, `ExternalLink`, `ChevronDown` | Removed |

### Acceptance Criteria

| Criterion | Evidence |
|-----------|----------|
| Quickstart request succeeds when followed exactly | JS snippet uses `credentials: "include"` — cookies sent automatically in browser |
| No contradictory auth instructions exist | All Bearer API key references removed; honest about session-based auth |

### Validation Gates

| Gate | Result |
|------|--------|
| `npm run build` (post-change) | **exit 0**, 63 routes ✅ |
| Checklist updated | `T14` → `[x]` ✅ |

## Artifacts

- Modified: `src/app/(app)/rulebooks/[id]/api/page.tsx`
- Updated: `MVP-CHECKLIST.md` (T14 `[x]`)
- Report: `reports/T14.md` (this file)
