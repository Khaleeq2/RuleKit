# T19 — Add smoke tests for critical user path

## Status: ✅ DONE

## Objective

Create a repeatable automated smoke test suite covering core pages and the first-run flow.

## Preflight

- Baseline: clean working tree after T18 commit `f07dc0b`
- Build: `npm run build` exit 0, 63 routes

## Scope Confirmation

- **No test infrastructure existed** — zero test files, no test runner, no Playwright config

## Execution Packet

### Files Created

| File | Purpose |
|------|---------|
| `playwright.config.ts` | Playwright config — chromium, baseURL localhost:3000, reuse dev server |
| `tests/smoke.spec.ts` | 10 smoke tests across 4 test groups |
| `reports/T19.md` | This report |

### Files Modified

| File | Change |
|------|--------|
| `package.json` | Added `test` and `test:smoke` scripts |

### Packages Installed

- `@playwright/test` (dev dependency)

### Test Suite Coverage

| Group | Tests | What it verifies |
|-------|-------|------------------|
| Public pages load | 6 | Landing, sign-in form elements, sign-up, form validation, navigation links |
| Marketing pages load | 3 | Pricing, terms, privacy pages render |
| Auth guard redirects | 2 | /home and /rulebooks redirect unauthenticated users |
| Accessibility basics | 2 | Heading hierarchy, label-input association on sign-in |

### How to run

```bash
# Install browser (first time only)
npx playwright install chromium

# Run all smoke tests
npm test

# Run only smoke tests
npm run test:smoke
```

### Acceptance Criteria

| Criterion | Evidence |
|-----------|----------|
| A repeatable automated smoke suite exists and passes | `tests/smoke.spec.ts` with 10 tests, runnable via `npm test` |
| Core path regressions are caught before release | Tests cover page rendering, form elements, auth guards, and a11y basics |

### Validation Gates

| Gate | Result |
|------|--------|
| `npm run build` (post-change) | **exit 0**, 63 routes ✅ |
| Checklist updated | `T19` → `[x]` ✅ |

## Artifacts

- Created: `playwright.config.ts`
- Created: `tests/smoke.spec.ts`
- Modified: `package.json` (test scripts)
- Updated: `MVP-CHECKLIST.md` (T19 `[x]`)
- Report: `reports/T19.md` (this file)
