# T21 — Repair API docs/backend contract drift

## Status: ✅ DONE

## Objective

Make the in-app API docs page truthful and executable against the current `/api/evaluate` backend.

## Scope

- `/Users/khaleeq/Documents/projects/RuleKit/rulekit-v0.2/src/app/(app)/rulebooks/[id]/api/page.tsx`

## Changes Made

- Removed misleading environment selector and API-key-oriented framing.
- Loaded real rulebook + schema + rules so generated examples match route expectations.
- Updated request payload examples to exact backend shape:
  - `input` (string)
  - `rulebook_id`
  - `rulebook_name`
  - `rules` (with `id`, `name`, `description`, `reason`)
  - optional `output_type`
- Updated response example to `EvaluateResponse` shape (`success` + `result`).
- Replaced error table with actual route status codes: `400`, `401`, `422`, `429`, `502`, `503`, `500`.
- Added explicit session-auth note and no-enabled-rules warning.

## Validation

- `npm run build` -> exit `0`
- `npm run test:smoke` -> `13 passed`

## Acceptance

- [x] Request examples use exact backend fields.
- [x] Error-code documentation matches implemented behavior.
- [x] Auth model is consistently session-cookie based.
